name: ext-swoole_postgresql

on: [push, pull_request]

jobs:
  build-ubuntu-latest:
    runs-on: ubuntu-16.04
    steps:
    - uses: actions/checkout@v1
    - name: install-swoole
      run: wget https://github.com/swoole/swoole-src/archive/master.zip &&
        tar xvf master.zip &&
        cd swoole-src-master &&
        phpize &&
        make -j 8 install
    - name: phpize
      run: phpize
    - name: build
      run: ./configure && make clean && make -j$(sysctl -n hw.ncpu)
